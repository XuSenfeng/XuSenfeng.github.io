---
layout: article
title: "Linux中的面向对象思想-封装"
---

# Linux中的面向对象思想：封装

#### 实现方法

+ 使用结构体
+ 使用函数指针



```C
struct animal
{
    int age;
    int weight;
    void (*fp)(void);
};
```

可以对函数等进一步封装

```C
struct func_operations
{
	void (*fp1)(void);
    void (*fp2)(void);
    void (*fp3)(void);
    void (*fp4)(void);
};
struct anmal
{
	int age;
    int weight;
    struct func_operations fp;
};
```

继承

```C
struct cat{
    struct animal *p;
    struct animal ani;
    char sex;
    void (*eat)(void);
};
```

#### 示例

```C
  1 #include <stdio.h>                                                                  
  2 
  3 void speak(void)
  4 {
  5     printf("aniaml speaking...\n");
  6 }
  7 
  8 struct func_operations{
  9     void (*fp1)(void);
 10     void (*fp2)(void);
 11     void (*fp3)(void);
 12     void (*fp4)(void);
 13 };
 14 
 15 struct animal{
 16     int age;
 17     int weight;
 18     struct func_operations fp;
 19 };
 20 struct cat{
 21     struct animal *p;
 22     struct animal ani;
 23     char sex;
 24 };
 25 int main(void)
 26 {
 27     struct animal ani;
 28     ani.age = 1;
 29     ani.weight = 2;
 30     ani.fp.fp1 = speak;
 31     printf("%d %d\n", ani.age, ani.weight);
 32     ani.fp.fp1();
 33 
 34     struct cat c;
 35     c.p = &ani;
 36     c.p ->fp.fp1();
 37     printf("%d %d", c.p->age, c.p->weight);
 38     return 0;
 39 
 40 } 


1 2
aniaml speaking...
aniaml speaking...
1 2
```









